{% extends 'base.html' %}

{% block content %}
<h1>{% if order %}Edit Order{% else %}Add Order{% endif %}</h1>

<form method="POST">
    {% csrf_token %}

    <label>Client</label>
    <select name="client" required>
        {% for client in clients %}
            <option value="{{ client.id }}" {% if order and order.client.id == client.id %}selected{% endif %}>
                {{ client.name }}
            </option>
        {% endfor %}
    </select>

    <label>Title</label>
    <input type="text" name="title" value="{{ order.title|default_if_none:'' }}" required>

    <label>Description</label>
    <textarea name="description" rows="3">{{ order.description|default_if_none:'' }}</textarea>

    <label>Amount</label>
    <input type="number" step="0.01" name="amount" value="{{ order.amount|default_if_none:'' }}" required>

    <label>Status</label>
    <select name="status" required>
        {% for s in statuses %}
            <option value="{{ client.id }}" {% if order and order.client.id == client.id %}selected{% endif %}>
                {{ client.name }}
            </option>
        {% endfor %}
    </select>

    <div class="action-buttons">
        <button type="submit" class="btn btn-primary">
            {% if order %}Update{% else %}Create{% endif %} Order
        </button>
        <a href="{% url 'order_list' %}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}